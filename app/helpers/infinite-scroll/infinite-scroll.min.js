(function(a,n){if("object"===typeof infinite_scroll){var l=function(){var b=0;setInterval(function(){b+=3;a("#infinite-scroll-loader img").rotate(b)},10)},k=function(b){g=!1;a("#infinite-scroll-loader").length||(a("body").append('<div id="infinite-scroll-loader"><img alt="Loading..." src="'+infinite_scroll.loader+'" /></div>'),l());a("#infinite-scroll-loader").fadeIn("fast");var c={page:b};a.extend(c,infinite_scroll.data);a.post(infinite_scroll.ajaxurl,a.param(c)).done(function(d){var m=infinite_scroll.container&&
a("#"+infinite_scroll.container).length?a("#"+infinite_scroll.container).first():a("body").first();if(infinite_scroll.pagination_selector&&a(infinite_scroll.pagination_selector).length){a(infinite_scroll.pagination_selector+":visible").hide("fast");var e=infinite_scroll.container&&a("#"+infinite_scroll.container).length?a("#"+infinite_scroll.container+" > "+infinite_scroll.pagination_selector).last():a("body > "+infinite_scroll.pagination_selector).last();e.length&&e.is(":last-child")||(e=!1)}e.length?
e.before(d).before(function(){infinite_scroll.pagination_more&&b<infinite_scroll.max&&e.html(infinite_scroll.pagination_more).show("fast")}):m.append(d);f=h()}).always(function(){a("#infinite-scroll-loader").fadeOut("normal");g=!0})},h=function(){var b=infinite_scroll.container&&a("#"+infinite_scroll.container).length?a("#"+infinite_scroll.container).offset().top+a("#"+infinite_scroll.container).outerHeight()-a(window).height():a(document).height()-a(window).height();return parseInt(b,10)},g=!0,f;
a(document).ready(function(b){var c=2;infinite_scroll.paged&&(c=parseInt(infinite_scroll.paged,10)+1);b(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){b(this).trigger("resizeEnd")},500)}).bind("resizeEnd",function(d){if(c>infinite_scroll.max)return b(this).unbind(d),!1;f=h();return!0});b(window).scroll(function(){this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){b(this).trigger("scrollEnd")},250)}).bind("scrollEnd",
function(d){if(c>infinite_scroll.max)return b(this).unbind(d),!1;if(!g)return!1;b(window).scrollTop()>=f?(k(c),c++):f=h();return!0});b("body").on("click","#infinite-scroll-more",function(d){if(c>infinite_scroll.max)return b(this).unbind(d),!1;if(!g)return!1;k(c);c++;return!1})});a(window).on("load",function(){f=h()})}})(jQuery);